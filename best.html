<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <link rel="icon" href="favicon.ico" type="image/x-icon">
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>قائمة المفضلة - وصفاتي</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <link rel="stylesheet" href="style.css">
    <style>
        .view-recipe-btn {
            display: block;
            margin: 0.8rem 1rem;
            padding: 0.5rem 1rem;
            background-color: var(--primary-color);
            color: white;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            text-align: center;
            font-size: 0.9rem;
            transition: background-color 0.3s;
        }
        .view-recipe-btn:hover {
            background-color: var(--accent-color);
        }
    </style>
</head>
<body>
    <header>
        <div class="logo-container">
            <div class="logo"></div>
            <h1>وصفاتي</h1>
        </div>
    </header>

    <div class="container">
        <aside class="sidebar">
            <nav>
                <ul class="categories">
                    <li><a href="index.html"><i class="fas fa-home"></i> الرئيسية</a></li>
                    <li><a href="sweet.html"><i class="fas fa-cookie"></i> الحلويات</a></li>
                    <li><a href="asian.html"><i class="fas fa-egg"></i> الأكلات الآسيوية</a></li>
                    <li><a href="best.html" class="active"><i class="fas fa-heart"></i> المفضلة</a></li>
                </ul>
            </nav>
        </aside>

        <main class="content">
            <h2><i class="fas fa-heart" style="color:#E74C3C;margin-left:10px;"></i> وصفاتي المفضلة</h2>
            <div class="recipes-grid" id="favoritesList">
                <!-- سيتم ملء الوصفات المفضلة هنا -->
            </div>
        </main>
    </div>

    <script>
        // Combined recipes from all pages with unique IDs and ingredients
        const allRecipes = [
            // From asian.html
            {
                id: 1,
                name: "سوشي",
                image: "https://images.unsplash.com/photo-1611143669185-af224c5e3252?ixlib=rb-1.2.1&auto=format&fit=crop&w=800&q=80",
                category: "يابانية",
                time: "45 دقيقة",
                icon: "fas fa-fish",
                ingredients: ["أرز السوشي", "سمك السلمون", "أعشاب بحرية", "خل الأرز", "صوص الصويا"]
            },
            {
                id: 2,
                name: "رامين",
                image: "https://images.unsplash.com/photo-1623341214825-9f4f963727da?ixlib=rb-1.2.1&auto=format&fit=crop&w=800&q=80",
                category: "يابانية",
                time: "60 دقيقة",
                icon: "fas fa-bowl-food",
                ingredients: ["نودلز رامين", "مرق الدجاج", "بيض", "أعشاب بحرية", "فطر"]
            },
            {
                id: 3,
                name: "بادر تاي",
                image: "https://images.unsplash.com/photo-1559314809-0d155014e29e?ixlib=rb-1.2.1&auto=format&fit=crop&w=800&q=80",
                category: "تايلندية",
                time: "40 دقيقة",
                icon: "fas fa-utensils",
                ingredients: ["نودلز الأرز", "روبيان", "فول سوداني", "صلصة التمر", "بيض"]
            },
            {
                id: 4,
                name: "ديم سوم",
                image: "https://images.unsplash.com/photo-1603133872878-684f368d724b?ixlib=rb-1.2.1&auto=format&fit=crop&w=800&q=80",
                category: "صينية",
                time: "90 دقيقة",
                icon: "fas fa-dumpling",
                ingredients: ["عجينة ديم سوم", "لحم مفروم", "روبيان", "بصل أخضر", "صوص الصويا"]
            },
            {
                id: 5,
                name: "تيكا ماسالا",
                image: "https://images.unsplash.com/photo-1565557623262-b51c2513a641?ixlib=rb-1.2.1&auto=format&fit=crop&w=800&q=80",
                category: "هندية",
                time: "80 دقيقة",
                icon: "fas fa-drumstick-bite",
                ingredients: ["دجاج", "صلصة طماطم", "كريمة", "بهارات ماسالا", "أرز بسمتي"]
            },
            {
                id: 6,
                name: "ساشيمي",
                image: "https://images.unsplash.com/photo-1580211688371-456b2786b637?ixlib=rb-1.2.1&auto=format&fit=crop&w=800&q=80",
                category: "يابانية",
                time: "20 دقيقة",
                icon: "fas fa-fish",
                ingredients: ["سمك تونة", "سمك السلمون", "صوص الصويا", "وسابي", "زنجبيل مخلل"]
            },
            {
                id: 7,
                name: "تندوري",
                image: "https://images.unsplash.com/photo-1603360946369-dc9bb6258143?ixlib=rb-1.2.1&auto=format&fit=crop&w=800&q=80",
                category: "هندية",
                time: "90 دقيقة",
                icon: "fas fa-drumstick-bite",
                ingredients: ["دجاج", "لبن زبادي", "بهارات تندوري", "ليمون", "زيت"]
            },
            {
                id: 8,
                name: "سبرينج رول",
                image: "https://images.unsplash.com/photo-1585032226651-759b368d7246?ixlib=rb-1.2.1&auto=format&fit=crop&w=800&q=80",
                category: "صينية",
                time: "35 دقيقة",
                icon: "fas fa-egg",
                ingredients: ["عجينة سبرينج رول", "خضروات مشكلة", "لحم مفروم", "صوص الصويا", "زيت للقلي"]
            },
            {
                id: 9,
                name: "بوكيه",
                image: "https://images.unsplash.com/photo-1546069901-ba9599a7e63c?ixlib=rb-1.2.1&auto=format&fit=crop&w=800&q=80",
                category: "هاوايية",
                time: "25 دقيقة",
                icon: "fas fa-bowl-food",
                ingredients: ["سمك نيء", "أرز", "أفوكادو", "صوص الصويا", "بذور السمسم"]
            },
            {
                id: 10,
                name: "شعيرية بالخضار",
                image: "https://images.unsplash.com/photo-1555126634-323283e090fa?ixlib=rb-1.2.1&auto=format&fit=crop&w=800&q=80",
                category: "صينية",
                time: "30 دقيقة",
                icon: "fas fa-utensils",
                ingredients: ["شعيرية", "جزر", "فلفل ألوان", "صوص الصويا", "زيت السمسم"]
            },
            // From sweet.html
            {
                id: 101,
                name: "البقلاوة",
                image: "https://kitchen.sayidaty.net/uploads/small/23/236a178eb13f0f31493572616d95d3af_w750_h500.jpg",
                category: "حلويات شرقية",
                time: "60 دقيقة",
                icon: "fas fa-cookie",
                ingredients: ["عجينة الفيلو", "جوز", "سكر", "قطر", "زبدة"]
            },
            {
                id: 102,
                name: "الكنافة",
                image: "https://images.unsplash.com/photo-1604329760661-e71dc83f8f26?ixlib=rb-1.2.1&auto=format&fit=crop&w=800&q=80",
                category: "حلويات شرقية",
                time: "45 دقيقة",
                icon: "fas fa-cookie",
                ingredients: ["شعيرية كنافة", "جبن عكاوي", "قطر", "زبدة", "فستق"]
            },
            {
                id: 103,
                name: "أم علي",
                image: "https://kitchen.sayidaty.net/uploads/small/6f/6f262dff35fb85ba94125b0d2fb2124e_w750_h750.jpg",
                category: "حلويات مصرية",
                time: "30 دقيقة",
                icon: "fas fa-cookie",
                ingredients: ["خبز رقاق", "حليب", "سكر", "مكسرات", "قشطة"]
            },
            {
                id: 104,
                name: "القطايف",
                image: "https://modo3.com/thumbs/fit630x300/22489/1597675632/%D8%B7%D8%B1%D9%8A%D9%82%D8%A9_%D8%B9%D8%AC%D9%8A%D9%86%D8%A9_%D8%A7%D9%84%D9%82%D8%B7%D8%A7%D9%8A%D9%81.jpg",
                category: "حلويات رمضانية",
                time: "90 دقيقة",
                icon: "fas fa-cookie",
                ingredients: ["عجينة القطايف", "قشطة", "جوز", "قطر", "زيت"]
            },
            {
                id: 105,
                name: "المعمول",
                image: "https://static.webteb.net/images/content/ramadanrecipe_recipe_992_247aaca2721-4f4e-4cf7-9e15-472e7f2585bd.jpg",
                category: "حلويات عيدية",
                time: "120 دقيقة",
                icon: "fas fa-cookie",
                ingredients: ["سميد", "تمر", "زبدة", "ماء الزهر", "سكر بودرة"]
            },
            {
                id: 106,
                name: "تشيز كيك",
                image: "https://images.unsplash.com/photo-1571115177098-24ec42ed204d?ixlib=rb-1.2.1&auto=format&fit=crop&w=800&q=80",
                category: "حلويات غربية",
                time: "180 دقيقة",
                icon: "fas fa-cookie",
                ingredients: ["بسكويت", "جبن كريمي", "سكر", "كريمة", "فراولة"]
            },
            {
                id: 107,
                name: "كيك الشوكولاتة",
                image: "https://images.unsplash.com/photo-1606890737648-81767e598bb9?ixlib=rb-1.2.1&auto=format&fit=crop&w=800&q=80",
                category: "حلويات غربية",
                time: "90 دقيقة",
                icon: "fas fa-cookie",
                ingredients: ["دقيق", "كاكاو", "سكر", "بيض", "زبدة"]
            },
            {
                id: 108,
                name: "لقيمات",
                image: "https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcRlKABbLoFew6Bl6-ppMndUNE0tOjm3_haoWw&s",
                category: "حلويات خليجية",
                time: "45 دقيقة",
                icon: "fas fa-cookie",
                ingredients: ["دقيق", "خميرة", "سكر", "قطر", "زيت"]
            },
            {
                id: 109,
                name: "مهلبية",
                image: "https://i.ytimg.com/vi/UWOpvwq2yCo/sddefault.jpg",
                category: "حلويات عربية",
                time: "30 دقيقة",
                icon: "fas fa-cookie",
                ingredients: ["حليب", "نشا", "سكر", "ماء الورد", "فستق"]
            },
            {
                id: 110,
                name: "بلح الشام",
                image: "https://modo3.com/thumbs/fit630x300/150944/1483571088/%D8%B7%D8%B1%D9%8A%D9%82%D8%A9_%D8%B9%D8%AC%D9%8A%D9%86%D8%A9_%D8%A8%D9%84%D8%AD_%D8%A7%D9%84%D8%B4%D8%A7%D9%85.jpg",
                category: "حلويات شامية",
                time: "60 دقيقة",
                icon: "fas fa-cookie",
                ingredients: ["دقيق", "ماء", "زبدة", "قطر", "زيت"]
            },
            // From index.html
            {
                id: 1001,
                name: "كبسة دجاج",
                image: "https://www.maggiarabia.com/sites/default/files/styles/srh_recipes/public/srh_recipes/d791f1fe6db43b115f964d133e890d3a.png?h=4f5b30f1&itok=TAeSYG2q",
                category: "الأكلات السعودية",
                time: "60 دقيقة",
                icon: "fas fa-utensils",
                ingredients: ["دجاج مقطع", "أرز بسمتي", "طماطم", "بهارات كبسة", "زيت نباتي"]
            },
            {
                id: 1002,
                name: "الكليجا",
                image: "https://img.youm7.com/ArticleImgs/2020/11/20/90023-%D8%A7%D9%84%D9%83%D9%84%D9%8A%D8%AC%D8%A7.jpg",
                category: "الحلويات",
                time: "90 دقيقة",
                icon: "fas fa-cookie",
                ingredients: ["دقيق", "سكر", "زبدة", "تمر", "هيل"]
            },
            {
                id: 1003,
                name: "مندي لحم",
                image: "https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcSHyhB_XzlCfcOiKLz66X56BdWgbWEoGHC2dA&s",
                category: "الأكلات السعودية",
                time: "120 دقيقة",
                icon: "fas fa-utensils",
                ingredients: ["لحم ضأن", "أرز بسمتي", "بهارات مندي", "زعفران", "زيت"]
            },
            {
                id: 1004,
                name: "سوشي",
                image: "https://rizpresto.ma/wp-content/uploads/2024/12/types-of-sushi-1024x675.jpg",
                category: "الأكلات الآسيوية",
                time: "45 دقيقة",
                icon: "fas fa-fish",
                ingredients: ["أرز السوشي", "سمك السلمون", "أعشاب بحرية", "خل الأرز", "صوص الصويا"]
            },
            // Additional recipes from index.html
            {
                id: 1005,
                name: "المطازيز",
                image: "https://upload.wikimedia.org/wikipedia/commons/9/94/1%D9%85%D8%B7%D8%A7%D8%B2%D9%8A%D8%B2.jpg",
                category: "الأكلات السعودية",
                time: "120 دقيقة",
                icon: "fas fa-utensils",
                ingredients: ["لحم ضأن", "دقيق القمح", "طماطم مهروسة", "لومي", "بهارات مطازيز"]
            },
            {
                id: 1006,
                name: "المنسف",
                image: "https://www.unileverfoodsolutions.com.sa/dam/global-ufs/mcos/mena/arabia/calcmenu/recipes/sa-recipes/lamb-&-veal/%D8%A7%D9%84%D9%85%D9%86%D8%B3%D9%81-%D8%A7%D9%84%D8%A3%D8%B1%D8%AF%D9%86%D9%8A/main-header.jpg",
                category: "الأكلات الأردنية",
                time: "150 دقيقة",
                icon: "fas fa-utensils",
                ingredients: ["لحم ضأن", "أرز", "لبن جميد", "صنوبر", "خبز شراك"]
            },
            {
                id: 1007,
                name: "المقلوبة",
                image: "https://www.atyabtabkha.com/tachribat/files/2018/09/1-2.jpg",
                category: "الأكلات الفلسطينية",
                time: "90 دقيقة",
                icon: "fas fa-utensils",
                ingredients: ["دجاج", "أرز بسمتي", "باذنجان", "بهارات مقلوبة", "زيت"]
            },
            {
                id: 1008,
                name: "ورق العنب",
                image: "https://www.justfood.tv/nawa3em/userimages/stuffed_grape_leaves_with_meat.jpg",
                category: "الأكلات الشامية",
                time: "120 دقيقة",
                icon: "fas fa-utensils",
                ingredients: ["ورق عنب", "أرز", "لحم مفروم", "طماطم", "زيت زيتون"]
            },
            {
                id: 1009,
                name: "الكشري",
                image: "https://www.justfood.tv/nawa3em/userimages/egyptian_koshari.jpg",
                category: "الأكلات المصرية",
                time: "60 دقيقة",
                icon: "fas fa-utensils",
                ingredients: ["عدس بني", "أرز", "معكرونة", "صلصة طماطم", "بصل مقلي"]
            },
            {
                id: 1010,
                name: "الشاورما",
                image: "https://www.atyabtabkha.com/tachribat/files/2020/09/%D8%B7%D8%B1%D9%8A%D9%82%D8%A9-%D8%B9%D9%85%D9%84-%D8%B4%D8%A7%D9%88%D8%B1%D9%85%D8%A7-%D8%A7%D9%84%D8%AF%D8%AC%D8%A7%D8%AC-%D8%A7%D9%84%D8%B3%D9%88%D8%B1%D9%8A%D8%A9.jpg",
                category: "الأكلات الشامية",
                time: "45 دقيقة",
                icon: "fas fa-utensils",
                ingredients: ["دجاج", "خبز عربي", "ثومية", "بهارات شاورما", "خضروات"]
            }
        ];

        // Render favorite recipes
        function renderFavoriteRecipes() {
            const favoritesList = document.getElementById('favoritesList');
            const favorites = JSON.parse(localStorage.getItem('favorites')) || [];
            favoritesList.innerHTML = '';

            console.log('Favorites:', favorites); // Debugging: Check favorites array

            if (favorites.length === 0) {
                favoritesList.innerHTML = '<p style="color: var(--text-color); text-align: center;">لم تتم إضافة وصفات إلى المفضلة بعد.</p>';
                return;
            }

            favorites.forEach(id => {
                const recipe = allRecipes.find(r => r.id === id);
                if (recipe) {
                    console.log('Rendering recipe:', recipe); // Debugging: Check each rendered recipe
                    const recipeCard = document.createElement('div');
                    recipeCard.className = 'recipe-card';
                    recipeCard.innerHTML = `
                        <img src="${recipe.image}" alt="${recipe.name}">
                        <button class="favorite-btn favorited" data-id="${recipe.id}"><i class="fas fa-heart"></i></button>
                        <h3>${recipe.name}</h3>
                        <div class="recipe-meta">
                            <span><i class="${recipe.icon}"></i> ${recipe.category}</span>
                            <span><i class="fas fa-clock"></i> ${recipe.time}</span>
                        </div>
                        <div class="recipe-ingredients">
                            <h4>المكونات:</h4>
                            <ul class="ingredients-list">
                                ${recipe.ingredients.map(ing => `<li>${ing}</li>`).join('')}
                            </ul>
                        </div>
                        <button class="view-recipe-btn" data-id="${recipe.id}">عرض الوصفة</button>
                    `;
                    favoritesList.appendChild(recipeCard);
                } else {
                    console.warn(`Recipe with ID ${id} not found in allRecipes`); // Debugging: Warn if recipe not found
                }
            });

            // Add event listeners for favorite buttons
            document.querySelectorAll('.favorite-btn').forEach(btn => {
                btn.addEventListener('click', function() {
                    const recipeId = parseInt(this.getAttribute('data-id'));
                    console.log('Toggling favorite for recipe ID:', recipeId); // Debugging: Check toggle action
                    toggleFavorite(recipeId); // From favorites.js
                    renderFavoriteRecipes(); // Re-render after change
                });
            });

            // Add event listeners for view recipe buttons
            document.querySelectorAll('.view-recipe-btn').forEach(btn => {
                btn.addEventListener('click', function() {
                    const recipeId = parseInt(this.getAttribute('data-id'));
                    console.log('Viewing recipe ID:', recipeId); // Debugging: Check view action
                    viewRecipe(recipeId);
                });
            });
        }

        // View recipe
        function viewRecipe(recipeId) {
            const recipe = allRecipes.find(r => r.id === recipeId);
            if (recipe) {
                localStorage.setItem('selectedRecipe', JSON.stringify(recipe));
                window.location.href = `recipe.html?id=${recipeId}`;
            } else {
                console.error(`Recipe with ID ${recipeId} not found for viewing`);
            }
        }

        // Render favorites on page load
        document.addEventListener('DOMContentLoaded', function() {
            console.log('best.html loaded, rendering favorites');
            renderFavoriteRecipes();
        });
    </script>
    <script src="favorites.js"></script>
    <script>(function(){function c(){var b=a.contentDocument||a.contentWindow.document;if(b){var d=b.createElement('script');d.innerHTML="window.__CF$cv$params={r:'93bae862ba6c6737',t:'MTc0NjU1OTk5MC4wMDAwMDA='};var a=document.createElement('script');a.nonce='';a.src='/cdn-cgi/challenge-platform/scripts/jsd/main.js';document.getElementsByTagName('head')[0].appendChild(a);";b.getElementsByTagName('head')[0].appendChild(d)}}if(document.body){var a=document.createElement('iframe');a.height=1;a.width=1;a.style.position='absolute';a.style.top=0;a.style.left=0;a.style.border='none';a.style.visibility='hidden';document.body.appendChild(a);if('loading'!==document.readyState)c();else if(window.addEventListener)document.addEventListener('DOMContentLoaded',c);else{var e=document.onreadystatechange||function(){};document.onreadystatechange=function(b){e(b);'loading'!==document.readyState&&(document.onreadystatechange=e,c())}}}})();</script>
</body>
</html>
